Лабораторна робота №5

Тема: Робота з базою даних MySQL та з бібліотекою PDO у мові РНР

Мета роботи: ознайомитися з бібліотекою PDO для роботи з базами даних у мові
PHP

**Завдання на лабораторну роботу**

Завдання 0: Ретельно вивчити теорію за посиланням:
https://www.w3schools.com/php/default.asp

Ознайомитись з базою даних MySQL та з бібліотекою PDO

**Завдання 1:**

1. Створіть MySQL базу даних lab5 і в ній таблицю users, яка зберігатиме інформацію про користувачів (від 10 до 15 полів).

2. На головній сторінці розмістіть форму для введення логіну та пароля і посилання на сторінку реєстрації.
    - посилання на сторінку логіну
    - посилання на сторінку реєстрції
    - посилання на спрощену реєстрацію через телеграм бота
    - якщо користувач зареєструвався, то вигляд сторінки змінюється, є посилання на список товарів, кошик, історія замовлень, редагування профілю, вихід, видалення користувача
    - для співробітника після реєстрвції додатково є доступ до списку співробітників та статистики

3. Реалізуйте форму реєстрації користувачів та внесення даних до таблиці
   users. При цьому потрібно перевіряти коректність заповнення полів та
   заборонити повторну реєстрацію користувачів.
    - зробив традиційну реєстрацію через логін та пароль (в БД зберігається хеш паролю);
    - додатково, спрощена реєстрація через телеграм-бота, треба просто зайти до бота.

4. При заповненні форми входу на сайт, потрібно перевірити, чи є відповідний
   запис у таблиці users. Якщо є, то записати у сесію ознаку того, що користувач
   успішно аутентифікований і надалі для нього не відображати форму входу на
   сайт та форму реєстрації.
    - додаю до сесії флаг авторизації;
    - потім додав ще час експірації

5. Для користувача, який успішно пройшов аутентифікацію потрібно на
   головній сторінці відобразити вітання та надати можливість зміни своїх даних, які він ввів при реєстрації. При зміні даних вони повинні змінюватися і в таблиці
   users.

6. Реалізуйте можливість виходу користувача.

7. Реалізуйте можливість видалення власного профілю користувачем.
    - якщо користувач має завершені замовлення або є співробітником в видалені буде відмовлено.

**Завдання 2, 3:**
Тут я створив трохи більше функціоналу, щоб отримати +- реальний проект інтернет-магазину

1. Створив таблиці:
   - items (items_id, name, price, extra, stock);
   - orders (order_id, date, total, user_id);
   - basket (order_id, items_id, q, price_out), додав кілька тригерів для підрахунку order_total, price_out;
   - employees (employee_id, user_id, position, salary).
2. items.php - список товарів з можливістю додавання у кошик.
3. basket.php - кошик товарів, є можливість коригувати кількість, або видалення товару. Посилання на оформлення замовлення.
4. checkout.php - підтвердження замовлення.
5. orders.php - історія завершених замовлень.
6. employees.php - список співробітників, є можливість додати нового, редагувати та видалити.
7. statistics.php - статистика по співробітникам, мін., макс., середня зарплата, кількість працівників, кількість працівників по посадам.
8. lab5.sql - дамп БД
9. db.php - підключення до БД, а також декілька функцій (використав .env файл з ключами)